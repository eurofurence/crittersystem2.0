{% extends 'base.html.twig' %}
{% import 'components/forms/_macros.twig' as f %}

{% block title %}{{ pageTitle }}{% endblock %}

{% block body %}
<div class="container py-4">
  <h1 class="mb-3">{{ pageTitle }}</h1>

  <div class="d-flex gap-2 mb-4">
    <a class="btn btn-outline-primary" href="{{ path('app_home') }}">Home</a>
    <a class="btn btn-outline-secondary" href="{{ path('app_dashboard') }}">Dashboard</a>
  </div>

  {% if submitted %}
    <div class="alert alert-info">
      <div class="fw-bold mb-2">Submitted data</div>
      <pre class="mb-0">{{ data|json_encode(constant('JSON_PRETTY_PRINT')) }}</pre>
    </div>
  {% endif %}


    <hr class="my-4">

    <h2 class="h4 mb-3">Debounced Search (Turbo Frame)</h2>

    {{ f.search_input('q', {
        label: 'Department search',
        placeholder: 'Type e.g. "reg" or "sec"...',
        debounceMs: 250,
        turboFrame: 'kit_search_frame',
        help: 'Updates results via Turbo Frame using ?q= parameter'
       })
    }}

    <turbo-frame
        id="kit_search_frame"
        src="{{ path('app_form_kit_search_frame') }}"
        loading="lazy"
    ></turbo-frame>


  {{ form_start(form) }}

  <div class="row">
    {{ f.field(form.title, {col: 'col-12 col-md-6', help: 'Regular text input'}) }}
    {{ f.datetime_local(form.startsAt, {col: 'col-12 col-md-6', help: 'Rendered as datetime-local'}) }}

    {# Render priority as a range slider for the demo #}
    {{ f.range_slider(form.priority, {col: 'col-12', min: 0, max: 10, step: 1, help: 'Range slider with live value'}) }}

    {# Multi-select: weâ€™ll render the Symfony field as default for now, and later add a macro for Symfony ChoiceType #}
    <div class="col-12 mb-3">
        {{ f.choice_multiple(form.departments, {
        col: 'col-12',
        size: 6,
        help: 'ChoiceType multiple rendered via macro'
        }) }}
    </div>
  </div>

  <button class="btn btn-primary">{{ form.save.vars.label }}</button>

  {{ form_end(form) }}
  
</div>
{% endblock %}
